// electron/server/app/extend/emojiHelper.js

/**
 * æ ¹æ®å¯¹è¯å†…å®¹ç”ŸæˆåŒ¹é…çš„ emoji
 * @param {string} content - å¯¹è¯å†…å®¹æˆ–æ ‡é¢˜
 * @returns {string} - åŒ¹é…çš„ emoji
 */
exports.getEmojiForTitle = (title) => {
  if (!title) return 'ğŸ’¬';
  
  // å…³é”®è¯åˆ° emoji çš„æ˜ å°„
  const keywordMap = {
    // æŠ€æœ¯ç›¸å…³
    'ä»£ç ': 'ğŸ’»', 'ç¼–ç¨‹': 'ğŸ‘¨â€ğŸ’»', 'å¼€å‘': 'âš™ï¸', 'è½¯ä»¶': 'ğŸ“Š', 'ç¡¬ä»¶': 'ğŸ”Œ',
    'ç½‘ç»œ': 'ğŸŒ', 'æ•°æ®': 'ğŸ“ˆ', 'AI': 'ğŸ¤–', 'äººå·¥æ™ºèƒ½': 'ğŸ§ ', 'æœºå™¨å­¦ä¹ ': 'ğŸ“Š',
    'code': 'ğŸ’»', 'programming': 'ğŸ‘¨â€ğŸ’»', 'software': 'ğŸ“Š', 'data': 'ğŸ“ˆ',
    
    // å­¦ä¹ ç›¸å…³
    'å­¦ä¹ ': 'ğŸ“š', 'æ•™è‚²': 'ğŸ“', 'è¯¾ç¨‹': 'ğŸ“', 'çŸ¥è¯†': 'ğŸ’¡', 'ç ”ç©¶': 'ğŸ”¬',
    'åˆ†æ': 'ğŸ“Š', 'ç†è§£': 'ğŸ§©', 'æ€è€ƒ': 'ğŸ¤”', 'learn': 'ğŸ“š', 'study': 'ğŸ“',
    
    // åˆ›æ„ç›¸å…³
    'åˆ›æ„': 'ğŸ’¡', 'è®¾è®¡': 'ğŸ¨', 'è‰ºæœ¯': 'ğŸ–¼ï¸', 'éŸ³ä¹': 'ğŸµ', 'ç»˜ç”»': 'ğŸ–Œï¸',
    'å†™ä½œ': 'âœï¸', 'åˆ›ä½œ': 'ğŸ­', 'çµæ„Ÿ': 'âœ¨', 'creative': 'ğŸ’¡', 'design': 'ğŸ¨',
    
    // å•†åŠ¡ç›¸å…³
    'å·¥ä½œ': 'ğŸ’¼', 'ä¼šè®®': 'ğŸ‘¥', 'é¡¹ç›®': 'ğŸ“‹', 'è®¡åˆ’': 'ğŸ“…', 'æŠ¥å‘Š': 'ğŸ“Š',
    'å¸‚åœº': 'ğŸ“ˆ', 'é”€å”®': 'ğŸ’°', 'å®¢æˆ·': 'ğŸ¤', 'work': 'ğŸ’¼', 'business': 'ğŸ’¼',
    
    // æ—¥å¸¸ç”Ÿæ´»
    'æ—¥å¸¸': 'ğŸ ', 'å®¶åº­': 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§', 'è´­ç‰©': 'ğŸ›’', 'é¥®é£Ÿ': 'ğŸ½ï¸', 'äº¤é€š': 'ğŸš—',
    'ç”Ÿæ´»': 'ğŸŒ', 'å®¶åŠ¡': 'ğŸ§¹', 'ä¼‘æ¯': 'ğŸ›Œ', 'daily': 'ğŸ“†', 'life': 'ğŸŒ',
    
    // å¥åº·ç›¸å…³
    'å¥åº·': 'ğŸ¥', 'åŒ»ç–—': 'âš•ï¸', 'ç–¾ç—…': 'ğŸ¤’', 'è¯ç‰©': 'ğŸ’Š', 'é”»ç‚¼': 'ğŸ‹ï¸',
    'é¥®é£Ÿ': 'ğŸ¥—', 'è¥å…»': 'ğŸ¥¦', 'ç¡çœ ': 'ğŸ˜´', 'health': 'â¤ï¸', 'medical': 'ğŸ¥',
    
    // å¨±ä¹ç›¸å…³
    'æ¸¸æˆ': 'ğŸ®', 'ç”µå½±': 'ğŸ¬', 'ç”µè§†': 'ğŸ“º', 'å¨±ä¹': 'ğŸ­', 'ä¼‘é—²': 'ğŸ¯',
    'çˆ±å¥½': 'ğŸ¨', 'game': 'ğŸ®', 'movie': 'ğŸ¬', 'entertainment': 'ğŸ­',
    
    // æ—…è¡Œç›¸å…³
    'æ—…è¡Œ': 'âœˆï¸', 'æ—…æ¸¸': 'ğŸ—ºï¸', 'åº¦å‡': 'ğŸ–ï¸', 'æ¢é™©': 'ğŸ§—', 'æ™¯ç‚¹': 'ğŸï¸',
    'é…’åº—': 'ğŸ¨', 'èˆªç­': 'âœˆï¸', 'è¡Œç¨‹': 'ğŸ—“ï¸', 'travel': 'âœˆï¸', 'tour': 'ğŸ—ºï¸',
    
    // æƒ…æ„Ÿç›¸å…³
    'å¿«ä¹': 'ğŸ˜Š', 'æ‚²ä¼¤': 'ğŸ˜¢', 'æ„¤æ€’': 'ğŸ˜¡', 'ææƒ§': 'ğŸ˜±', 'çˆ±æƒ…': 'â¤ï¸',
    'å‹è°Š': 'ğŸ¤', 'æƒ…æ„Ÿ': 'ğŸ’•', 'å¿ƒæƒ…': 'ğŸ˜Œ', 'happy': 'ğŸ˜Š', 'sad': 'ğŸ˜¢',
    
    // é»˜è®¤å…³é”®è¯
    'èŠå¤©': 'ğŸ’¬', 'å¯¹è¯': 'ğŸ—£ï¸', 'é—®ç­”': 'â“', 'æ–°å¯¹è¯': 'ğŸ†•', 'å¸®åŠ©': 'ğŸ†˜',
    'é—®é¢˜': 'â“', 'è§£ç­”': 'ğŸ’¡', 'å’¨è¯¢': 'ğŸ“', 'chat': 'ğŸ’¬', 'question': 'â“'
  };
  
  // é»˜è®¤ emoji åˆ—è¡¨ï¼Œå½“æ²¡æœ‰åŒ¹é…å…³é”®è¯æ—¶ä½¿ç”¨
  const defaultEmojis = [
    'ğŸ’¬', 'ğŸ¤–', 'ğŸ”®', 'âœ¨', 'ğŸŒŸ', 'ğŸŒˆ', 'ğŸš€', 'ğŸ¯', 'ğŸª', 'ğŸ­', 
    'ğŸ', 'ğŸŠ', 'ğŸ‰', 'ğŸ†', 'ğŸ¸', 'ğŸ§', 'ğŸ“±', 'ğŸ’»', 'ğŸŒ', 'ğŸ“š'
  ];
  
  // æ£€æŸ¥æ ‡é¢˜ä¸­æ˜¯å¦åŒ…å«å…³é”®è¯
  for (const [keyword, emoji] of Object.entries(keywordMap)) {
    if (title.toLowerCase().includes(keyword.toLowerCase())) {
      return emoji;
    }
  }
  
  // å¦‚æœæ²¡æœ‰åŒ¹é…çš„å…³é”®è¯ï¼Œä½¿ç”¨æ ‡é¢˜çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ç”Ÿæˆä¸€è‡´çš„ emoji
  const charCode = title.charCodeAt(0);
  return defaultEmojis[charCode % defaultEmojis.length];
};

/**
 * ä¸ºæ ‡é¢˜æ·»åŠ  emoji å‰ç¼€
 * @param {string} title - åŸå§‹æ ‡é¢˜
 * @returns {string} - å¸¦æœ‰ emoji å‰ç¼€çš„æ ‡é¢˜
 */
exports.addEmojiToTitle = (title) => {
  if (!title) return 'ğŸ’¬ æ–°å¯¹è¯';
  
  const emoji = exports.getEmojiForTitle(title);
  return `${emoji} ${title}`;
};